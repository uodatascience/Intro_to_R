<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R Guide Index</title>
  <meta name="description" content="R Guide Index">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="R Guide Index" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="<a href="https://github.com/uodatascience/R_Guide" class="uri">https://github.com/uodatascience/R_Guide</a>" />
  
  
  <meta name="github-repo" content="uodatascience/R_Guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Guide Index" />
  
  
  

<meta name="author" content="UO Data Science">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="base-types.html">
<link rel="next" href="s4-objects.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> UO R Guide</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#lessons"><i class="fa fa-check"></i><b>1.1</b> Lessons</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="what-the-f-is-r-and-how-do-i-get-started-with-it.html"><a href="what-the-f-is-r-and-how-do-i-get-started-with-it.html"><i class="fa fa-check"></i><b>3</b> What the F#$% is R and how do I get started with it?</a><ul>
<li class="chapter" data-level="3.1" data-path="what-the-f-is-r-and-how-do-i-get-started-with-it.html"><a href="what-the-f-is-r-and-how-do-i-get-started-with-it.html#installing-r-and-r-studio"><i class="fa fa-check"></i><b>3.1</b> Installing R and R Studio</a></li>
<li class="chapter" data-level="3.2" data-path="what-the-f-is-r-and-how-do-i-get-started-with-it.html"><a href="what-the-f-is-r-and-how-do-i-get-started-with-it.html#how-do-i-r"><i class="fa fa-check"></i><b>3.2</b> How do I R?!</a><ul>
<li class="chapter" data-level="3.2.1" data-path="what-the-f-is-r-and-how-do-i-get-started-with-it.html"><a href="what-the-f-is-r-and-how-do-i-get-started-with-it.html#using-rstudio"><i class="fa fa-check"></i><b>3.2.1</b> Using RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="what-the-f-is-r-and-how-do-i-get-started-with-it.html"><a href="what-the-f-is-r-and-how-do-i-get-started-with-it.html#getting-help"><i class="fa fa-check"></i><b>3.3</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>4</b> What is R?</a><ul>
<li class="chapter" data-level="4.1" data-path="what-is-r.html"><a href="what-is-r.html#objects"><i class="fa fa-check"></i><b>4.1</b> Objects</a></li>
<li class="chapter" data-level="4.2" data-path="what-is-r.html"><a href="what-is-r.html#functions"><i class="fa fa-check"></i><b>4.2</b> Functions</a></li>
<li class="chapter" data-level="4.3" data-path="what-is-r.html"><a href="what-is-r.html#packages"><i class="fa fa-check"></i><b>4.3</b> Packages</a></li>
<li class="chapter" data-level="4.4" data-path="what-is-r.html"><a href="what-is-r.html#some-more-useful-basic-syntax"><i class="fa fa-check"></i><b>4.4</b> Some more useful basic syntax</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="objects-1.html"><a href="objects-1.html"><i class="fa fa-check"></i><b>5</b> Objects</a><ul>
<li class="chapter" data-level="5.1" data-path="objects-1.html"><a href="objects-1.html#what-are-objects"><i class="fa fa-check"></i><b>5.1</b> What are Objects?</a></li>
<li class="chapter" data-level="5.2" data-path="objects-1.html"><a href="objects-1.html#object-terminology"><i class="fa fa-check"></i><b>5.2</b> Object terminology</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="objects-in-r.html"><a href="objects-in-r.html"><i class="fa fa-check"></i><b>6</b> Objects in R</a><ul>
<li class="chapter" data-level="6.1" data-path="objects-in-r.html"><a href="objects-in-r.html#object-systems"><i class="fa fa-check"></i><b>6.1</b> Object Systems</a></li>
<li class="chapter" data-level="6.2" data-path="objects-in-r.html"><a href="objects-in-r.html#attributes"><i class="fa fa-check"></i><b>6.2</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="base-types.html"><a href="base-types.html"><i class="fa fa-check"></i><b>7</b> Base Types</a><ul>
<li class="chapter" data-level="7.1" data-path="base-types.html"><a href="base-types.html#vectors"><i class="fa fa-check"></i><b>7.1</b> Vectors</a></li>
<li class="chapter" data-level="7.2" data-path="base-types.html"><a href="base-types.html#matrices-arrays"><i class="fa fa-check"></i><b>7.2</b> Matrices &amp; Arrays</a></li>
<li class="chapter" data-level="7.3" data-path="base-types.html"><a href="base-types.html#data-frames"><i class="fa fa-check"></i><b>7.3</b> Data Frames</a></li>
<li class="chapter" data-level="7.4" data-path="base-types.html"><a href="base-types.html#etc."><i class="fa fa-check"></i><b>7.4</b> Etc.</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="s3-objects.html"><a href="s3-objects.html"><i class="fa fa-check"></i><b>8</b> S3 Objects</a><ul>
<li class="chapter" data-level="8.1" data-path="s3-objects.html"><a href="s3-objects.html#example-extending-s3-objects"><i class="fa fa-check"></i><b>8.1</b> Example: Extending S3 Objects</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="s4-objects.html"><a href="s4-objects.html"><i class="fa fa-check"></i><b>9</b> S4 Objects</a></li>
<li class="chapter" data-level="10" data-path="reference-classes.html"><a href="reference-classes.html"><i class="fa fa-check"></i><b>10</b> Reference Classes</a></li>
<li class="chapter" data-level="11" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>11</b> References</a></li>
<li class="chapter" data-level="12" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>12</b> Data</a><ul>
<li class="chapter" data-level="12.1" data-path="data.html"><a href="data.html#loading-data"><i class="fa fa-check"></i><b>12.1</b> Loading data</a></li>
<li class="chapter" data-level="12.2" data-path="data.html"><a href="data.html#one-day-we-will-have-a-summary-table-here"><i class="fa fa-check"></i><b>12.2</b> One day we will have a summary table here</a></li>
<li class="chapter" data-level="12.3" data-path="data.html"><a href="data.html#csv-files"><i class="fa fa-check"></i><b>12.3</b> .csv files</a><ul>
<li class="chapter" data-level="12.3.1" data-path="data.html"><a href="data.html#defaults"><i class="fa fa-check"></i><b>12.3.1</b> Defaults</a></li>
<li class="chapter" data-level="12.3.2" data-path="data.html"><a href="data.html#a-brief-interlude-into-formats-for-data-in-r"><i class="fa fa-check"></i><b>12.3.2</b> A brief interlude into formats for data in R</a></li>
<li class="chapter" data-level="12.3.3" data-path="data.html"><a href="data.html#format-issues"><i class="fa fa-check"></i><b>12.3.3</b> Format issues?</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="data.html"><a href="data.html#sav-files"><i class="fa fa-check"></i><b>12.4</b> .sav files</a></li>
<li class="chapter" data-level="12.5" data-path="data.html"><a href="data.html#rio-for-general-import"><i class="fa fa-check"></i><b>12.5</b> <code>rio</code> for general import</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="saving-data.html"><a href="saving-data.html"><i class="fa fa-check"></i><b>13</b> Saving data</a><ul>
<li class="chapter" data-level="13.1" data-path="saving-data.html"><a href="saving-data.html#rdata-files"><i class="fa fa-check"></i><b>13.1</b> .RData files</a></li>
<li class="chapter" data-level="13.2" data-path="saving-data.html"><a href="saving-data.html#sink"><i class="fa fa-check"></i><b>13.2</b> <code>sink</code></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i><b>14</b> Indexing</a><ul>
<li class="chapter" data-level="14.1" data-path="indexing.html"><a href="indexing.html#logical-indexing"><i class="fa fa-check"></i><b>14.1</b> Logical indexing</a></li>
<li class="chapter" data-level="14.2" data-path="indexing.html"><a href="indexing.html#assignment-with-indexing"><i class="fa fa-check"></i><b>14.2</b> Assignment with Indexing</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>15</b> Manipulating Data</a><ul>
<li class="chapter" data-level="15.1" data-path="manipulating-data.html"><a href="manipulating-data.html#wide-vs.long-data"><i class="fa fa-check"></i><b>15.1</b> Wide vs. Long Data</a></li>
<li class="chapter" data-level="15.2" data-path="manipulating-data.html"><a href="manipulating-data.html#piping-syntax"><i class="fa fa-check"></i><b>15.2</b> Piping syntax</a><ul>
<li class="chapter" data-level="15.2.1" data-path="manipulating-data.html"><a href="manipulating-data.html#a-quick-sidenote-about-the-term-pipe"><i class="fa fa-check"></i><b>15.2.1</b> A quick sidenote about the term pipe</a></li>
<li class="chapter" data-level="15.2.2" data-path="manipulating-data.html"><a href="manipulating-data.html#the-logic-of-piping-syntax"><i class="fa fa-check"></i><b>15.2.2</b> The logic of piping syntax</a></li>
<li class="chapter" data-level="15.2.3" data-path="manipulating-data.html"><a href="manipulating-data.html#logic-of-piping-syntax-continued"><i class="fa fa-check"></i><b>15.2.3</b> Logic of Piping Syntax continued</a></li>
<li class="chapter" data-level="15.2.4" data-path="manipulating-data.html"><a href="manipulating-data.html#why-use-pipes"><i class="fa fa-check"></i><b>15.2.4</b> Why use pipes?</a></li>
<li class="chapter" data-level="15.2.5" data-path="manipulating-data.html"><a href="manipulating-data.html#saving-the-output-of-your-pipe"><i class="fa fa-check"></i><b>15.2.5</b> Saving the output of your pipe</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="manipulating-data.html"><a href="manipulating-data.html#reshaping-data"><i class="fa fa-check"></i><b>15.3</b> Reshaping Data</a><ul>
<li class="chapter" data-level="15.3.1" data-path="manipulating-data.html"><a href="manipulating-data.html#wide-to-long"><i class="fa fa-check"></i><b>15.3.1</b> Wide to Long</a></li>
<li class="chapter" data-level="15.3.2" data-path="manipulating-data.html"><a href="manipulating-data.html#long-to-wide"><i class="fa fa-check"></i><b>15.3.2</b> Long to wide</a></li>
<li class="chapter" data-level="15.3.3" data-path="manipulating-data.html"><a href="manipulating-data.html#final-note-on-reshaping-data"><i class="fa fa-check"></i><b>15.3.3</b> Final note on reshaping data</a></li>
<li class="chapter" data-level="15.3.4" data-path="manipulating-data.html"><a href="manipulating-data.html#section"><i class="fa fa-check"></i><b>15.3.4</b> </a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>16</b> Resources</a></li>
<li class="chapter" data-level="17" data-path="useful-functions.html"><a href="useful-functions.html"><i class="fa fa-check"></i><b>17</b> Useful Functions</a></li>
<li class="chapter" data-level="18" data-path="workspace.html"><a href="workspace.html"><i class="fa fa-check"></i><b>18</b> Workspace</a></li>
<li class="chapter" data-level="19" data-path="objects-2.html"><a href="objects-2.html"><i class="fa fa-check"></i><b>19</b> Objects</a></li>
<li class="chapter" data-level="20" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>20</b> Iteration</a></li>
<li class="chapter" data-level="21" data-path="style-tips.html"><a href="style-tips.html"><i class="fa fa-check"></i><b>21</b> Style Tips</a><ul>
<li class="chapter" data-level="21.1" data-path="style-tips.html"><a href="style-tips.html#nothing-here-except-a-reminder-to-jonny-that-they-should-make-this-page"><i class="fa fa-check"></i><b>21.1</b> NOTHING HERE EXCEPT A REMINDER TO JONNY THAT THEY SHOULD MAKE THIS PAGE</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="how-do-i.html"><a href="how-do-i.html"><i class="fa fa-check"></i><b>22</b> How do I…</a><ul>
<li class="chapter" data-level="22.1" data-path="how-do-i.html"><a href="how-do-i.html#yeeeeeeep-same-thing-here-nothing-but-a-slim-breeze-whistling-through-yer-earwells-the-tickle-tells-ya-it-dont-exist-yet"><i class="fa fa-check"></i><b>22.1</b> YEEEEEEEP SAME THING HERE NOTHING BUT A SLIM BREEZE WHISTLING THROUGH YER EARWELLS, THE TICKLE TELLS YA IT DONT EXIST YET</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Guide Index</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="s3-objects" class="section level1">
<h1><span class="header-section-number">8</span> S3 Objects</h1>
<p>S3 objects “belong to” functions, which become their methods. S3 classes don’t really “exist,” but are assigned as an object’s “class” attribute. S3 classes are one of the worst things about R, but are also responsible for some of its flexibility.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="kw">attr</span>(x, <span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x) &lt;-<span class="st"> &quot;letters&quot;</span>
<span class="kw">attr</span>(x, <span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;letters&quot;</code></pre>
<p>One can find an articulation of the reasoning behind this “function-and-class” programming can be found here: <a href="https://developer.r-project.org/howMethodsWork.pdf" class="uri">https://developer.r-project.org/howMethodsWork.pdf</a>. We’ll talk more about this in later sections.</p>
<p>S3 objects are defined by a series of functions that themselves contain the <code>UseMethod()</code> function - this is described briefly above, try <code>?UseMethod</code> for more detail. These functions extend the generic function, typically using the syntax <code>generic.class()</code> as in the case of <code>mean.Date()</code> for taking the mean of dates. One can list the objects that have a generic method, and the methods that an object has with <code>methods()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(mean) <span class="co"># list the classes that have this method</span></code></pre></div>
<pre><code>## [1] mean.Date     mean.default  mean.difftime mean.POSIXct  mean.POSIXlt 
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(<span class="dt">class=</span><span class="st">&quot;Date&quot;</span>) <span class="co"># list the methods that this class has</span></code></pre></div>
<pre><code>##  [1] -             [             [[            [&lt;-           +            
##  [6] as.character  as.data.frame as.list       as.POSIXct    as.POSIXlt   
## [11] Axis          c             cut           diff          format       
## [16] hist          is.numeric    julian        Math          mean         
## [21] months        Ops           pretty        print         quarters     
## [26] rep           round         seq           split         str          
## [31] summary       Summary       trunc         weekdays      weighted.mean
## [36] xtfrm        
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<p>By default, the source code of S3 methods is not visible to R, one can retreive it with `utils::getS3method``</p>
<p>The <code>plot</code> base function is an s3 generic method.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">ftype</span>(plot) <span class="co"># get a function&#39;s type</span></code></pre></div>
<pre><code>## [1] &quot;s3&quot;      &quot;generic&quot;</code></pre>
<p>By default, if the first argument is a base type compatible with being points on a scatterplot, the actual function that is called is <code>plot.default</code>, whose source behaves like you’d expect:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">plot.default</code></pre></div>
<pre><code>## function (x, y = NULL, type = &quot;p&quot;, xlim = NULL, ylim = NULL, 
##     log = &quot;&quot;, main = NULL, sub = NULL, xlab = NULL, ylab = NULL, 
##     ann = par(&quot;ann&quot;), axes = TRUE, frame.plot = axes, panel.first = NULL, 
##     panel.last = NULL, asp = NA, ...) 
## {
##     localAxis &lt;- function(..., col, bg, pch, cex, lty, lwd) Axis(...)
##     localBox &lt;- function(..., col, bg, pch, cex, lty, lwd) box(...)
##     localWindow &lt;- function(..., col, bg, pch, cex, lty, lwd) plot.window(...)
##     localTitle &lt;- function(..., col, bg, pch, cex, lty, lwd) title(...)
##     xlabel &lt;- if (!missing(x)) 
##         deparse(substitute(x))
##     ylabel &lt;- if (!missing(y)) 
##         deparse(substitute(y))
##     xy &lt;- xy.coords(x, y, xlabel, ylabel, log)
##     xlab &lt;- if (is.null(xlab)) 
##         xy$xlab
##     else xlab
##     ylab &lt;- if (is.null(ylab)) 
##         xy$ylab
##     else ylab
##     xlim &lt;- if (is.null(xlim)) 
##         range(xy$x[is.finite(xy$x)])
##     else xlim
##     ylim &lt;- if (is.null(ylim)) 
##         range(xy$y[is.finite(xy$y)])
##     else ylim
##     dev.hold()
##     on.exit(dev.flush())
##     plot.new()
##     localWindow(xlim, ylim, log, asp, ...)
##     panel.first
##     plot.xy(xy, type, ...)
##     panel.last
##     if (axes) {
##         localAxis(if (is.null(y)) 
##             xy$x
##         else x, side = 1, ...)
##         localAxis(if (is.null(y)) 
##             x
##         else y, side = 2, ...)
##     }
##     if (frame.plot) 
##         localBox(...)
##     if (ann) 
##         localTitle(main = main, sub = sub, xlab = xlab, ylab = ylab, 
##             ...)
##     invisible()
## }
## &lt;bytecode: 0x7fa10316dca0&gt;
## &lt;environment: namespace:graphics&gt;</code></pre>
<p>If the first argument to <code>plot</code> has its own <code>plot</code> method (ie. that it is exported by the object’s package namespace, more about this in section 5), that function is called instead. That’s why</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aq &lt;-<span class="st"> </span>datasets::airquality
<span class="kw">plot</span>(<span class="kw">lm</span>(Ozone ~<span class="st"> </span>Month, <span class="dt">data=</span>aq))</code></pre></div>
<p><img src="02-Objects_files/figure-html/unnamed-chunk-30-1.png" width="672" /><img src="02-Objects_files/figure-html/unnamed-chunk-30-2.png" width="672" /><img src="02-Objects_files/figure-html/unnamed-chunk-30-3.png" width="672" /><img src="02-Objects_files/figure-html/unnamed-chunk-30-4.png" width="672" /></p>
<p>is different than this nonsensical model</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(lme4::<span class="kw">lmer</span>(Ozone ~<span class="st"> </span><span class="dv">0</span> +<span class="st"> </span>(Day |<span class="st"> </span>Month), <span class="dt">data=</span>aq))</code></pre></div>
<p><img src="02-Objects_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div id="example-extending-s3-objects" class="section level2">
<h2><span class="header-section-number">8.1</span> Example: Extending S3 Objects</h2>
<blockquote>
<p><a href="http://adv-r.had.co.nz/OO-essentials.html" class="uri">http://adv-r.had.co.nz/OO-essentials.html</a> “Creating new methods and generics”</p>
</blockquote>
<p>Using a class’s method is what allows us to do sensible computations on different types of objects with the same command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">ftype</span>(mean) <span class="co"># mean is an s3 generic function</span></code></pre></div>
<pre><code>## [1] &quot;s3&quot;      &quot;generic&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="kw">class</span>(x) &lt;-<span class="st"> &quot;just_one&quot;</span>

<span class="co"># We give our &quot;just_one&quot; class a mean method:</span>
mean.just_one &lt;-<span class="st"> </span>function(x, ...) <span class="kw">print</span>(<span class="st">&quot;that&#39;s just a one you maniac&quot;</span>)

<span class="co"># Mean behaves like it should for numbers and lists of numbers</span>
<span class="kw">mean</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="fl">1.5</span>))</code></pre></div>
<pre><code>## [1] 1.25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(x) <span class="co"># Even though &quot;x&quot; is just 1, because we have given it a &quot;class&quot; attribute it calls mean.just_one rather than mean.default</span></code></pre></div>
<pre><code>## [1] &quot;that&#39;s just a one you maniac&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Other objects have their own mean() method</span>
<span class="kw">methods</span>(mean)</code></pre></div>
<pre><code>##  [1] mean,ANY-method          mean,Matrix-method      
##  [3] mean,sparseMatrix-method mean,sparseVector-method
##  [5] mean.Date                mean.default            
##  [7] mean.difftime            mean.just_one           
##  [9] mean.POSIXct             mean.POSIXlt            
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># like Date objects</span>
dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;01jan2000&quot;</span>,<span class="st">&quot;15jan2000&quot;</span>)
<span class="kw">attr</span>(dates,<span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(dates) <span class="co"># Don&#39;t work</span></code></pre></div>
<pre><code>## Warning in mean.default(dates): argument is not numeric or logical:
## returning NA</code></pre>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># turn it into &quot;Date&quot; object</span>
dates &lt;-<span class="st"> </span><span class="kw">as.Date</span>(dates, <span class="st">&quot;%d%b%Y&quot;</span>) <span class="co"># base has a set of &quot;as&quot; methods to convert types</span>
<span class="kw">attr</span>(dates,<span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(dates) <span class="co"># will call its method</span></code></pre></div>
<pre><code>## [1] &quot;2000-01-08&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean.Date</span>(dates) <span class="co"># which can also be called directly</span></code></pre></div>
<pre><code>## [1] &quot;2000-01-08&quot;</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="base-types.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="s4-objects.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
