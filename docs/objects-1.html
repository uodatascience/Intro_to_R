<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R Guide Index</title>
  <meta name="description" content="R Guide Index">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R Guide Index" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="<a href="https://github.com/uodatascience/R_Guide" class="uri">https://github.com/uodatascience/R_Guide</a>" />
  
  
  <meta name="github-repo" content="uodatascience/R_Guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Guide Index" />
  
  
  

<meta name="author" content="UO Data Science">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="what-is-r.html">
<link rel="next" href="data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Lessons</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#installing-r-and-r-studio"><i class="fa fa-check"></i><b>2.1</b> Installing R and R Studio</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#how-do-i-r"><i class="fa fa-check"></i><b>2.2</b> How do I R?!</a><ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#using-rstudio"><i class="fa fa-check"></i><b>2.2.1</b> Using RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>2.3</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>3</b> What is R?</a><ul>
<li class="chapter" data-level="3.1" data-path="what-is-r.html"><a href="what-is-r.html#objects"><i class="fa fa-check"></i><b>3.1</b> Objects</a></li>
<li class="chapter" data-level="3.2" data-path="what-is-r.html"><a href="what-is-r.html#functions"><i class="fa fa-check"></i><b>3.2</b> Functions</a></li>
<li class="chapter" data-level="3.3" data-path="what-is-r.html"><a href="what-is-r.html#packages"><i class="fa fa-check"></i><b>3.3</b> Packages</a></li>
<li class="chapter" data-level="3.4" data-path="what-is-r.html"><a href="what-is-r.html#some-useful-basic-syntax"><i class="fa fa-check"></i><b>3.4</b> Some useful basic syntax</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objects-1.html"><a href="objects-1.html"><i class="fa fa-check"></i><b>4</b> Objects</a><ul>
<li class="chapter" data-level="4.1" data-path="objects-1.html"><a href="objects-1.html#what-are-objects"><i class="fa fa-check"></i><b>4.1</b> What are Objects?</a><ul>
<li class="chapter" data-level="4.1.1" data-path="objects-1.html"><a href="objects-1.html#object-terminology"><i class="fa fa-check"></i><b>4.1.1</b> Object terminology</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="objects-1.html"><a href="objects-1.html#objects-in-r"><i class="fa fa-check"></i><b>4.2</b> Objects in R</a><ul>
<li class="chapter" data-level="4.2.1" data-path="objects-1.html"><a href="objects-1.html#object-systems"><i class="fa fa-check"></i><b>4.2.1</b> Object Systems</a></li>
<li class="chapter" data-level="4.2.2" data-path="objects-1.html"><a href="objects-1.html#attributes"><i class="fa fa-check"></i><b>4.2.2</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="objects-1.html"><a href="objects-1.html#base-types"><i class="fa fa-check"></i><b>4.3</b> Base Types</a><ul>
<li class="chapter" data-level="4.3.1" data-path="objects-1.html"><a href="objects-1.html#vectors"><i class="fa fa-check"></i><b>4.3.1</b> Vectors</a></li>
<li class="chapter" data-level="4.3.2" data-path="objects-1.html"><a href="objects-1.html#matrices-arrays"><i class="fa fa-check"></i><b>4.3.2</b> Matrices &amp; Arrays</a></li>
<li class="chapter" data-level="4.3.3" data-path="objects-1.html"><a href="objects-1.html#data-frames"><i class="fa fa-check"></i><b>4.3.3</b> Data Frames</a></li>
<li class="chapter" data-level="4.3.4" data-path="objects-1.html"><a href="objects-1.html#etc."><i class="fa fa-check"></i><b>4.3.4</b> Etc.</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="objects-1.html"><a href="objects-1.html#s3-objects"><i class="fa fa-check"></i><b>4.4</b> S3 Objects</a><ul>
<li class="chapter" data-level="4.4.1" data-path="objects-1.html"><a href="objects-1.html#example-extending-s3-objects"><i class="fa fa-check"></i><b>4.4.1</b> Example: Extending S3 Objects</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="objects-1.html"><a href="objects-1.html#s4-objects"><i class="fa fa-check"></i><b>4.5</b> S4 Objects</a></li>
<li class="chapter" data-level="4.6" data-path="objects-1.html"><a href="objects-1.html#reference-classes"><i class="fa fa-check"></i><b>4.6</b> Reference Classes</a></li>
<li class="chapter" data-level="4.7" data-path="objects-1.html"><a href="objects-1.html#references"><i class="fa fa-check"></i><b>4.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>5</b> Data</a><ul>
<li class="chapter" data-level="5.1" data-path="data.html"><a href="data.html#loading"><i class="fa fa-check"></i><b>5.1</b> Loading</a><ul>
<li class="chapter" data-level="5.1.1" data-path="data.html"><a href="data.html#one-day-we-will-have-a-summary-table-here"><i class="fa fa-check"></i><b>5.1.1</b> One day we will have a summary table here</a></li>
<li class="chapter" data-level="5.1.2" data-path="data.html"><a href="data.html#csv-files"><i class="fa fa-check"></i><b>5.1.2</b> .csv files</a></li>
<li class="chapter" data-level="5.1.3" data-path="data.html"><a href="data.html#defaults"><i class="fa fa-check"></i><b>5.1.3</b> Defaults</a></li>
<li class="chapter" data-level="5.1.4" data-path="data.html"><a href="data.html#a-brief-interlude-into-formats-for-data-in-r"><i class="fa fa-check"></i><b>5.1.4</b> A brief interlude into formats for data in R</a></li>
<li class="chapter" data-level="5.1.5" data-path="data.html"><a href="data.html#format-issues"><i class="fa fa-check"></i><b>5.1.5</b> Format issues?</a></li>
<li class="chapter" data-level="5.1.6" data-path="data.html"><a href="data.html#sav-files"><i class="fa fa-check"></i><b>5.1.6</b> .sav files</a></li>
<li class="chapter" data-level="5.1.7" data-path="data.html"><a href="data.html#rio-for-general-import"><i class="fa fa-check"></i><b>5.1.7</b> <code>rio</code> for general import</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data.html"><a href="data.html#saving"><i class="fa fa-check"></i><b>5.2</b> Saving</a><ul>
<li class="chapter" data-level="5.2.1" data-path="data.html"><a href="data.html#rdata-files"><i class="fa fa-check"></i><b>5.2.1</b> .RData files</a></li>
<li class="chapter" data-level="5.2.2" data-path="data.html"><a href="data.html#sink"><i class="fa fa-check"></i><b>5.2.2</b> <code>sink</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data.html"><a href="data.html#indexing"><i class="fa fa-check"></i><b>5.3</b> Indexing</a><ul>
<li class="chapter" data-level="5.3.1" data-path="data.html"><a href="data.html#logical-indexing"><i class="fa fa-check"></i><b>5.3.1</b> Logical indexing</a></li>
<li class="chapter" data-level="5.3.2" data-path="data.html"><a href="data.html#assignment-with-indexing"><i class="fa fa-check"></i><b>5.3.2</b> Assignment with Indexing</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data.html"><a href="data.html#basic-manipulation"><i class="fa fa-check"></i><b>5.4</b> Basic Manipulation</a></li>
<li class="chapter" data-level="5.5" data-path="data.html"><a href="data.html#piping-syntax"><i class="fa fa-check"></i><b>5.5</b> Piping Syntax</a><ul>
<li class="chapter" data-level="5.5.1" data-path="data.html"><a href="data.html#why-use-pipes"><i class="fa fa-check"></i><b>5.5.1</b> Why use pipes?</a></li>
<li class="chapter" data-level="5.5.2" data-path="data.html"><a href="data.html#saving-the-output-of-your-pipe"><i class="fa fa-check"></i><b>5.5.2</b> Saving the output of your pipe</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data.html"><a href="data.html#reshaping"><i class="fa fa-check"></i><b>5.6</b> Reshaping</a><ul>
<li class="chapter" data-level="5.6.1" data-path="data.html"><a href="data.html#wide-vs.long-data"><i class="fa fa-check"></i><b>5.6.1</b> Wide vs. Long Data</a></li>
<li class="chapter" data-level="5.6.2" data-path="data.html"><a href="data.html#wide-to-long"><i class="fa fa-check"></i><b>5.6.2</b> Wide to Long</a></li>
<li class="chapter" data-level="5.6.3" data-path="data.html"><a href="data.html#long-to-wide"><i class="fa fa-check"></i><b>5.6.3</b> Long to wide</a></li>
<li class="chapter" data-level="5.6.4" data-path="data.html"><a href="data.html#final-note-on-reshaping-data"><i class="fa fa-check"></i><b>5.6.4</b> Final note on reshaping data</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="data.html"><a href="data.html#summarizing"><i class="fa fa-check"></i><b>5.7</b> Summarizing</a><ul>
<li class="chapter" data-level="5.7.1" data-path="data.html"><a href="data.html#basic-summarization"><i class="fa fa-check"></i><b>5.7.1</b> Basic Summarization</a></li>
<li class="chapter" data-level="5.7.2" data-path="data.html"><a href="data.html#grouped-summarization"><i class="fa fa-check"></i><b>5.7.2</b> Grouped Summarization</a></li>
<li class="chapter" data-level="5.7.3" data-path="data.html"><a href="data.html#mutation"><i class="fa fa-check"></i><b>5.7.3</b> Mutation</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="data.html"><a href="data.html#type-specific-operations"><i class="fa fa-check"></i><b>5.8</b> Type-specific Operations</a><ul>
<li class="chapter" data-level="5.8.1" data-path="data.html"><a href="data.html#working-with-factors"><i class="fa fa-check"></i><b>5.8.1</b> Working with Factors</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="data.html"><a href="data.html#resources"><i class="fa fa-check"></i><b>5.9</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>6</b> Plotting</a><ul>
<li class="chapter" data-level="6.1" data-path="plotting.html"><a href="plotting.html#r-graphics-structure"><i class="fa fa-check"></i><b>6.1</b> R Graphics Structure</a></li>
<li class="chapter" data-level="6.2" data-path="plotting.html"><a href="plotting.html#base-graphics"><i class="fa fa-check"></i><b>6.2</b> Base graphics</a></li>
<li class="chapter" data-level="6.3" data-path="plotting.html"><a href="plotting.html#ggplot2"><i class="fa fa-check"></i><b>6.3</b> ggplot2</a><ul>
<li class="chapter" data-level="6.3.1" data-path="plotting.html"><a href="plotting.html#layers"><i class="fa fa-check"></i><b>6.3.1</b> Layers</a></li>
<li class="chapter" data-level="6.3.2" data-path="plotting.html"><a href="plotting.html#aesthetic-mappings"><i class="fa fa-check"></i><b>6.3.2</b> (aes)thetic mappings</a></li>
<li class="chapter" data-level="6.3.3" data-path="plotting.html"><a href="plotting.html#geoms-stats"><i class="fa fa-check"></i><b>6.3.3</b> Geoms &amp; Stats</a></li>
<li class="chapter" data-level="6.3.4" data-path="plotting.html"><a href="plotting.html#position"><i class="fa fa-check"></i><b>6.3.4</b> Position</a></li>
<li class="chapter" data-level="6.3.5" data-path="plotting.html"><a href="plotting.html#scales"><i class="fa fa-check"></i><b>6.3.5</b> Scales</a></li>
<li class="chapter" data-level="6.3.6" data-path="plotting.html"><a href="plotting.html#facets"><i class="fa fa-check"></i><b>6.3.6</b> Facets</a></li>
<li class="chapter" data-level="6.3.7" data-path="plotting.html"><a href="plotting.html#coordinate-systems"><i class="fa fa-check"></i><b>6.3.7</b> Coordinate Systems</a></li>
<li class="chapter" data-level="6.3.8" data-path="plotting.html"><a href="plotting.html#themes"><i class="fa fa-check"></i><b>6.3.8</b> Themes</a></li>
<li class="chapter" data-level="6.3.9" data-path="plotting.html"><a href="plotting.html#extensions"><i class="fa fa-check"></i><b>6.3.9</b> Extensions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="plotting.html"><a href="plotting.html#lattice"><i class="fa fa-check"></i><b>6.4</b> Lattice</a></li>
<li class="chapter" data-level="6.5" data-path="plotting.html"><a href="plotting.html#rendering"><i class="fa fa-check"></i><b>6.5</b> Rendering</a><ul>
<li class="chapter" data-level="6.5.1" data-path="plotting.html"><a href="plotting.html#using-graphics-engines"><i class="fa fa-check"></i><b>6.5.1</b> Using Graphics Engines</a></li>
<li class="chapter" data-level="6.5.2" data-path="plotting.html"><a href="plotting.html#ggsave"><i class="fa fa-check"></i><b>6.5.2</b> ggsave</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="plotting.html"><a href="plotting.html#grid"><i class="fa fa-check"></i><b>6.6</b> Grid</a></li>
<li class="chapter" data-level="6.7" data-path="plotting.html"><a href="plotting.html#references-1"><i class="fa fa-check"></i><b>6.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>7</b> Control Flow</a><ul>
<li class="chapter" data-level="7.1" data-path="control-flow.html"><a href="control-flow.html#for-loops"><i class="fa fa-check"></i><b>7.1</b> For Loops</a></li>
<li class="chapter" data-level="7.2" data-path="control-flow.html"><a href="control-flow.html#while-loops"><i class="fa fa-check"></i><b>7.2</b> While Loops</a></li>
<li class="chapter" data-level="7.3" data-path="control-flow.html"><a href="control-flow.html#ifthen-statements"><i class="fa fa-check"></i><b>7.3</b> If/Then Statements</a></li>
<li class="chapter" data-level="7.4" data-path="control-flow.html"><a href="control-flow.html#apply-functions"><i class="fa fa-check"></i><b>7.4</b> Apply functions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="functions-1.html"><a href="functions-1.html"><i class="fa fa-check"></i><b>8</b> Functions</a></li>
<li class="chapter" data-level="9" data-path="useful-functions.html"><a href="useful-functions.html"><i class="fa fa-check"></i><b>9</b> Useful Functions</a><ul>
<li class="chapter" data-level="9.1" data-path="useful-functions.html"><a href="useful-functions.html#workspace"><i class="fa fa-check"></i><b>9.1</b> Workspace</a></li>
<li class="chapter" data-level="9.2" data-path="useful-functions.html"><a href="useful-functions.html#objects-2"><i class="fa fa-check"></i><b>9.2</b> Objects</a></li>
<li class="chapter" data-level="9.3" data-path="useful-functions.html"><a href="useful-functions.html#iteration"><i class="fa fa-check"></i><b>9.3</b> Iteration</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="style-tips.html"><a href="style-tips.html"><i class="fa fa-check"></i><b>10</b> Style Tips</a><ul>
<li class="chapter" data-level="10.1" data-path="style-tips.html"><a href="style-tips.html#nothing-here-except-a-reminder-to-jonny-that-they-should-make-this-page"><i class="fa fa-check"></i><b>10.1</b> NOTHING HERE EXCEPT A REMINDER TO JONNY THAT THEY SHOULD MAKE THIS PAGE</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="how-do-i.html"><a href="how-do-i.html"><i class="fa fa-check"></i><b>11</b> How do I…</a><ul>
<li class="chapter" data-level="11.1" data-path="how-do-i.html"><a href="how-do-i.html#yeeeeeeep-same-thing-here-nothing-but-a-slim-breeze-whistling-through-yer-earwells-the-tickle-tells-ya-it-dont-exist-yet"><i class="fa fa-check"></i><b>11.1</b> YEEEEEEEP SAME THING HERE NOTHING BUT A SLIM BREEZE WHISTLING THROUGH YER EARWELLS, THE TICKLE TELLS YA IT DONT EXIST YET</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="resources-1.html"><a href="resources-1.html"><i class="fa fa-check"></i><b>12</b> Resources</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Guide Index</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="objects-1" class="section level1">
<h1><span class="header-section-number">4</span> Objects</h1>
<div id="what-are-objects" class="section level2">
<h2><span class="header-section-number">4.1</span> What are Objects?</h2>
<p>Objects are, roughly, data (or more generally a stored state) that knows what it can do.</p>
<p>We know what happens when we put this troublesome <code>+</code> guy between numbers</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> +<span class="st"> </span><span class="dv">1</span> <span class="co"># ud better b sitting down</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>But it’s less clear what it means to <code>+</code> letters</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;a&quot;</span> +<span class="st"> &quot;b&quot;</span></code></pre></div>
<pre><code>## Error in &quot;a&quot; + &quot;b&quot;: non-numeric argument to binary operator</code></pre>
<p>Let’s see what <code>typeof</code> variables <code>1</code> and <code>&quot;a&quot;</code> are :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(<span class="st">&quot;a&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<blockquote>
<p>(note this is a little misleading, <code>typeof</code> determines the base object class that an R object is stored as. All R objects are composed of base objects, we’ll get to the types of objects in the next section)</p>
</blockquote>
<p>R has a useful package <code>pryr</code> for inspecting objects and other meta-linguistic needs. Let’s get that now.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;pryr&quot;)</span></code></pre></div>
<div id="object-terminology" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Object terminology</h3>
<p>A <strong>class</strong> is the description, or ‘blueprint’ of how individual <strong>objects</strong> or <strong>instances</strong> are made, including their <strong>attributes</strong> - which data should be kept and what it should be named, and <strong>methods</strong>, the functions that they are capable of calling on their stored data or attributes. Objects can have a nested structure, and sub-classes can <strong>inherit</strong> the attributes and methods of their parent classes.</p>
<p>For example: As a class, trucks have attributes like engine_size, number_of_wheels, or number_of_jumps_gone_off. Trucks have the method go_faster(), but only individual instances of trucks can go_faster() - the concept/class of trucks can’t. As a subclass, monster_trucks also have the attributes engine_size, etc. and the method go_faster(), but they also have additional attributes like mythical_backstory and methods like monster_jam().</p>
</div>
</div>
<div id="objects-in-r" class="section level2">
<h2><span class="header-section-number">4.2</span> Objects in R</h2>
<blockquote>
<p>“In R functions are objects and can be manipulated in much the same way as any other object.” - <em>R language guide 2.1.5</em></p>
</blockquote>
<blockquote>
<p>“S3 objects are functions that call the functions of their objects” - <em>Also R</em></p>
</blockquote>
<div id="object-systems" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Object Systems</h3>
<p>R has base types and three object-oriented systems (also called <strong>types</strong>). We’ll spend more time on Base types and S3 objects in this lesson, and return to S4 and reference classes when we start building bigger code.</p>
<ul>
<li><p><strong>Base types:</strong> Low-level C types. Build the other object systems.</p></li>
<li><p><strong>S3 - “Casual objects”:</strong> Objects that use <strong>generic functions</strong>. S3 methods “belong to” functions, not classes. Functions contain the <strong>UseMethod(“function_name”, object)</strong> function (see <code>?UseMethod</code>).</p></li>
<li><p><strong>S4 - “Formal objects”:</strong> Formal classes with inheritance and means by which methods can be shared between classes. S4 methods still “belong to” functions, but classes are more rigorously defined.</p></li>
<li><p><strong>Reference classes:</strong> Objects that use <strong>message passing</strong> - or the method finally ‘belongs to’ the class rather than a function.</p></li>
</ul>
<p>The easiest way to see everything about an object is to use the str() function, short for structure. For example we can see everything about the lamest linear model ever</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lame_model &lt;-<span class="st"> </span><span class="kw">lm</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>) ~<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>))
<span class="kw">str</span>(lame_model)</code></pre></div>
<pre><code>## List of 12
##  $ coefficients : Named num [1:2] -3 1
##   ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;(Intercept)&quot; &quot;c(4, 5, 6)&quot;
##  $ residuals    : Named num [1:3] -9.06e-17 1.81e-16 -9.06e-17
##   ..- attr(*, &quot;names&quot;)= chr [1:3] &quot;1&quot; &quot;2&quot; &quot;3&quot;
##  $ effects      : Named num [1:3] -3.46 -1.41 -2.22e-16
##   ..- attr(*, &quot;names&quot;)= chr [1:3] &quot;(Intercept)&quot; &quot;c(4, 5, 6)&quot; &quot;&quot;
##  $ rank         : int 2
##  $ fitted.values: Named num [1:3] 1 2 3
##   ..- attr(*, &quot;names&quot;)= chr [1:3] &quot;1&quot; &quot;2&quot; &quot;3&quot;
##  $ assign       : int [1:2] 0 1
##  $ qr           :List of 5
##   ..$ qr   : num [1:3, 1:2] -1.732 0.577 0.577 -8.66 -1.414 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:3] &quot;1&quot; &quot;2&quot; &quot;3&quot;
##   .. .. ..$ : chr [1:2] &quot;(Intercept)&quot; &quot;c(4, 5, 6)&quot;
##   .. ..- attr(*, &quot;assign&quot;)= int [1:2] 0 1
##   ..$ qraux: num [1:2] 1.58 1.26
##   ..$ pivot: int [1:2] 1 2
##   ..$ tol  : num 1e-07
##   ..$ rank : int 2
##   ..- attr(*, &quot;class&quot;)= chr &quot;qr&quot;
##  $ df.residual  : int 1
##  $ xlevels      : Named list()
##  $ call         : language lm(formula = c(1, 2, 3) ~ c(4, 5, 6))
##  $ terms        :Classes &#39;terms&#39;, &#39;formula&#39;  language c(1, 2, 3) ~ c(4, 5, 6)
##   .. ..- attr(*, &quot;variables&quot;)= language list(c(1, 2, 3), c(4, 5, 6))
##   .. ..- attr(*, &quot;factors&quot;)= int [1:2, 1] 0 1
##   .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. .. ..$ : chr [1:2] &quot;c(1, 2, 3)&quot; &quot;c(4, 5, 6)&quot;
##   .. .. .. ..$ : chr &quot;c(4, 5, 6)&quot;
##   .. ..- attr(*, &quot;term.labels&quot;)= chr &quot;c(4, 5, 6)&quot;
##   .. ..- attr(*, &quot;order&quot;)= int 1
##   .. ..- attr(*, &quot;intercept&quot;)= int 1
##   .. ..- attr(*, &quot;response&quot;)= int 1
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
##   .. ..- attr(*, &quot;predvars&quot;)= language list(c(1, 2, 3), c(4, 5, 6))
##   .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:2] &quot;numeric&quot; &quot;numeric&quot;
##   .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;c(1, 2, 3)&quot; &quot;c(4, 5, 6)&quot;
##  $ model        :&#39;data.frame&#39;:   3 obs. of  2 variables:
##   ..$ c(1, 2, 3): num [1:3] 1 2 3
##   ..$ c(4, 5, 6): num [1:3] 4 5 6
##   ..- attr(*, &quot;terms&quot;)=Classes &#39;terms&#39;, &#39;formula&#39;  language c(1, 2, 3) ~ c(4, 5, 6)
##   .. .. ..- attr(*, &quot;variables&quot;)= language list(c(1, 2, 3), c(4, 5, 6))
##   .. .. ..- attr(*, &quot;factors&quot;)= int [1:2, 1] 0 1
##   .. .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. .. .. ..$ : chr [1:2] &quot;c(1, 2, 3)&quot; &quot;c(4, 5, 6)&quot;
##   .. .. .. .. ..$ : chr &quot;c(4, 5, 6)&quot;
##   .. .. ..- attr(*, &quot;term.labels&quot;)= chr &quot;c(4, 5, 6)&quot;
##   .. .. ..- attr(*, &quot;order&quot;)= int 1
##   .. .. ..- attr(*, &quot;intercept&quot;)= int 1
##   .. .. ..- attr(*, &quot;response&quot;)= int 1
##   .. .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt; 
##   .. .. ..- attr(*, &quot;predvars&quot;)= language list(c(1, 2, 3), c(4, 5, 6))
##   .. .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:2] &quot;numeric&quot; &quot;numeric&quot;
##   .. .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;c(1, 2, 3)&quot; &quot;c(4, 5, 6)&quot;
##  - attr(*, &quot;class&quot;)= chr &quot;lm&quot;</code></pre>
<p>We can query any object’s base type with pryr’s <code>otype</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">otype</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)) <span class="co"># A vector is a base object</span></code></pre></div>
<pre><code>## [1] &quot;base&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">otype</span>(<span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>))) <span class="co"># A dataframe is an S3 object</span></code></pre></div>
<pre><code>## [1] &quot;S3&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">otype</span>(lame_model) <span class="co"># as is our lame model.</span></code></pre></div>
<pre><code>## [1] &quot;S3&quot;</code></pre>
<p>and its class with <code>class</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>))</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(lame_model)</code></pre></div>
<pre><code>## [1] &quot;lm&quot;</code></pre>
<p>Confusingly, R’s object system means that a given object will have both a <strong>class</strong> and a <strong>type</strong>, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">otype</span>(<span class="kw">c</span>(<span class="dv">1</span>)) <span class="co"># The vector &quot;c(1)&quot; is a base type object</span></code></pre></div>
<pre><code>## [1] &quot;base&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">c</span>(<span class="dv">1</span>))       <span class="co"># whose class is &#39;numeric&#39;</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="attributes" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Attributes</h3>
<p>Object can also have arbitrarily many <strong>attributes</strong>. The most important and common are</p>
<ul>
<li><strong><code>names</code></strong> - which give the object the ability to refer to its elements by name. for example:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We can construct named vectors like this</span>
named_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;apples&quot;</span>=<span class="dv">1</span>, <span class="st">&quot;bananas&quot;</span>=<span class="dv">2</span>, <span class="st">&quot;cherries&quot;</span> =<span class="st"> </span><span class="dv">3</span>)
<span class="kw">names</span>(named_vector)</code></pre></div>
<pre><code>## [1] &quot;apples&quot;   &quot;bananas&quot;  &quot;cherries&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">named_vector[<span class="st">&quot;apples&quot;</span>]</code></pre></div>
<pre><code>## apples 
##      1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># or this</span>
named_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
<span class="kw">names</span>(named_vector) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;apples&quot;</span>, <span class="st">&quot;bananas&quot;</span>, <span class="st">&quot;cherries&quot;</span>)</code></pre></div>
<ul>
<li><p><strong><code>class</code></strong> - which is used by the S3 object system, we’ll see that in a moment</p></li>
<li><p><strong><code>dim</code></strong> - short for dimensions, which is used by multidimensional base objects. We’ll see that in a moment too.</p></li>
</ul>
<p>You can query a specific attribute with <code>attr</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attr</span>(named_vector, <span class="st">&quot;names&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;apples&quot;   &quot;bananas&quot;  &quot;cherries&quot;</code></pre>
<p>or list all attributes with <code>attributes</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(named_vector)</code></pre></div>
<pre><code>## $names
## [1] &quot;apples&quot;   &quot;bananas&quot;  &quot;cherries&quot;</code></pre>
</div>
</div>
<div id="base-types" class="section level2">
<h2><span class="header-section-number">4.3</span> Base Types</h2>
<p>Every R object is built out of basic C structures that define how it is stored and managed in memory.</p>
<p>This table from <a href="http://adv-r.had.co.nz/Data-structures.html#data-structures">Advanced R</a> summarizes them:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>Homogenous data</th>
<th>Heterogenous data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1-Dimensional</td>
<td>Atomic Vector</td>
<td>List</td>
</tr>
<tr class="even">
<td>2-Dimensional</td>
<td>Matrix</td>
<td>Data frame</td>
</tr>
<tr class="odd">
<td>N-Dimensional</td>
<td>Array</td>
<td></td>
</tr>
</tbody>
</table>
<p>Recall that we can use <code>typeof()</code> to find an object’s base type</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(<span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div id="vectors" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Vectors</h3>
<p>Vectors are sequences, the most basic data type in R. They have two varieties: <strong>atomic vectors</strong> (with homogenous values) and <strong>lists</strong> (with … heterogenous values).</p>
<p>R has no 0-dimensional, scalar types, so individual characters or numbers are length=one atomic vectors. They are:</p>
<table>
<thead>
<tr class="header">
<th>Atomic Vector Type</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Logical</td>
<td><code>booleans &lt;- c(TRUE, FALSE, NA)</code></td>
</tr>
<tr class="even">
<td>Integer</td>
<td><code>integers &lt;- c(1L, 2L, 3L)</code></td>
</tr>
<tr class="odd">
<td>Double (== <code>numeric</code>)</td>
<td><code>doubles &lt;- c(1, 2.5, 0.005)</code></td>
</tr>
<tr class="even">
<td>Character</td>
<td><code>characters &lt;- c(&quot;apple&quot;, &quot;banana&quot;)</code></td>
</tr>
</tbody>
</table>
<p><code>raw</code> and <code>complex</code> types also exist, but they are rare.</p>
<p>Vectors are constructed with <code>c()</code>. When heterogeneous vectors are constructed with <code>c()</code>, they are <strong>coerced</strong> to the most permissive vector type (an integer can be both a double (floating point numbers with decimal points) and character “1”) - the table above is ordered from least to most permissive.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vect_1 &lt;-<span class="st"> </span><span class="kw">c</span>(1L, 2L, 3L)
vect_2 &lt;-<span class="st"> </span><span class="kw">c</span>(1L, 2L, <span class="dv">3</span>)
vect_3 &lt;-<span class="st"> </span><span class="kw">c</span>(1L,<span class="dv">2</span>,<span class="st">&quot;3&quot;</span>)

<span class="kw">typeof</span>(vect_1)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(vect_2)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(vect_3)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We select elements of vectors with [] notation</span>
vect_1[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vect_3[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] &quot;1&quot;</code></pre>
<p>Each of the different atomic vector types has different methods (we’ll come back to how methods work in a bit), which explains why we can <code>1 + 1</code> but not <code>&quot;1&quot; + &quot;1&quot;</code>. Notice how the <code>integer</code> class has a set of methods called “Arith” (see <code>?Arith</code>, an S4 group of generic functions, something we won’t talk about until section 5) but <code>character</code> doesn’t.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(<span class="dt">class=</span><span class="st">&quot;integer&quot;</span>)</code></pre></div>
<pre><code>## [1] as.data.frame
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(<span class="dt">class=</span><span class="st">&quot;character&quot;</span>)</code></pre></div>
<pre><code>## [1] all.equal                as.data.frame           
## [3] as.Date                  as.POSIXlt              
## [5] as.raster                formula                 
## [7] getDLLRegisteredRoutines
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<p>To make a vector that preserves the types of its elements, make a <code>list</code> instead</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a_list &lt;-<span class="st"> </span><span class="kw">list</span>(1L,<span class="dv">2</span>,<span class="st">&quot;3&quot;</span>)
a_list</code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 2
## 
## [[3]]
## [1] &quot;3&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a_list[[<span class="dv">1</span>]])</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a_list[[<span class="dv">2</span>]])</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a_list[[<span class="dv">3</span>]])</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Notice the double bracket notation <code>[[]]</code>. Lists are commonly recursive, ie. they store other lists. Since the elements of our list are themselves lists, single bracket indexing <code>[]</code> returns lists, and <code>[[]]</code> returns the the elements in that list.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.recursive</span>(a_list)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a_list[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [[1]]
## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a_list[<span class="dv">1</span>])</code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Indexing recursive lists</span>
b_list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>:<span class="dv">3</span>, <span class="kw">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;cucumber&quot;</span>))
b_list</code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] &quot;apple&quot;    &quot;banana&quot;   &quot;cucumber&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b_list[<span class="dv">1</span>]    <span class="co"># gets the first list</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b_list[<span class="dv">1</span>][<span class="dv">1</span>] <span class="co"># doesn&#39;t work</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b_list[[<span class="dv">1</span>]]  <span class="co"># gets the contents of the first list</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b_list[[<span class="dv">1</span>]][<span class="dv">1</span>] <span class="co"># gets the first element of the contents of the first list</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Similarly to coersion among atomic vectors, vectors that contain lists will be coerced to lists.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="kw">c</span>(<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)) <span class="co"># vectors can&#39;t be recursive, so they get flattened</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="kw">c</span>(<span class="dv">1</span>),<span class="kw">list</span>(<span class="dv">2</span>,<span class="dv">3</span>)) <span class="co"># if one element is a list, the whole object will become a list</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 2
## 
## [[3]]
## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>))</code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Unlist turns lists back into (flat) atomic vectors</span>
<span class="kw">unlist</span>(<span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>)))</code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>Because they are the most general form of vector, lists are used as the base type for many derived classes, like data frames</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(<span class="kw">data.frame</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)))</code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
</div>
<div id="matrices-arrays" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Matrices &amp; Arrays</h3>
<p><strong>Arrays</strong> are atomic vectors with a <code>dim</code> attribute. <strong>Matrices</strong> are arrays with <code>dim = 2</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># General way of making arrays</span>
array_1 &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="dv">1</span>:<span class="dv">24</span>, <span class="dt">dim=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>))
array_1</code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## [2,]    8   10   12
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]   13   15   17
## [2,]   14   16   18
## 
## , , 4
## 
##      [,1] [,2] [,3]
## [1,]   19   21   23
## [2,]   20   22   24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(array_1)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(array_1)</code></pre></div>
<pre><code>## $dim
## [1] 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Matrices have their own syntax</span>
array_2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>:<span class="dv">24</span>, <span class="dt">ncol=</span><span class="dv">3</span>, <span class="dt">nrow=</span><span class="dv">8</span>)
array_2</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    9   17
## [2,]    2   10   18
## [3,]    3   11   19
## [4,]    4   12   20
## [5,]    5   13   21
## [6,]    6   14   22
## [7,]    7   15   23
## [8,]    8   16   24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># A vector can be made an array afterwards by setting the &#39;dim&#39; attribute</span>
array_3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">24</span>)
<span class="kw">dim</span>(array_3) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)
<span class="co"># or attr(array_3, &quot;dim&quot;) &lt;- c(2,3,4)</span>
array_3</code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## [2,]    8   10   12
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]   13   15   17
## [2,]   14   16   18
## 
## , , 4
## 
##      [,1] [,2] [,3]
## [1,]   19   21   23
## [2,]   20   22   24</code></pre>
<p>In higher dimensions, c() becomes <code>cbind(), rbind()</code>, and <code>abind()</code>; column and row bind for matrices and array bind for arrays.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_columns &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>))
by_columns</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_rows &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>))
by_rows</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">abind::<span class="kw">abind</span>(by_columns, by_rows, <span class="dt">along=</span><span class="dv">1</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
## [4,]    1    2    3
## [5,]    4    5    6
## [6,]    7    8    9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">abind::<span class="kw">abind</span>(by_columns, by_rows, <span class="dt">along=</span><span class="dv">2</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    4    7    1    2    3
## [2,]    2    5    8    4    5    6
## [3,]    3    6    9    7    8    9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">abind::<span class="kw">abind</span>(by_columns, by_rows, <span class="dt">along=</span><span class="dv">3</span>)</code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9</code></pre>
<p>Arrays and matrices also have new methods that lists and vectors dont.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(<span class="dt">class=</span><span class="st">&quot;list&quot;</span>)</code></pre></div>
<pre><code>## [1] all.equal     as.data.frame relist        within       
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(<span class="dt">class=</span><span class="st">&quot;matrix&quot;</span>)</code></pre></div>
<pre><code>##  [1] anyDuplicated as.data.frame as.raster     boxplot       determinant  
##  [6] duplicated    edit          head          isSymmetric   relist       
## [11] subset        summary       tail          unique       
## see &#39;?methods&#39; for accessing help and source code</code></pre>
</div>
<div id="data-frames" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Data Frames</h3>
<p>Data frames are one of the gems of R. A data frame is a list of equal length vectors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">little_ones =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),
                 <span class="dt">big_ones =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>))
df</code></pre></div>
<pre><code>##   little_ones big_ones
## 1           0        5
## 2           1        6
## 3           2        7
## 4           3        8
## 5           4        9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(df)</code></pre></div>
<pre><code>## $names
## [1] &quot;little_ones&quot; &quot;big_ones&quot;   
## 
## $row.names
## [1] 1 2 3 4 5
## 
## $class
## [1] &quot;data.frame&quot;</code></pre>
<p>data frames can be used like lists of vectors</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">1</span>]</code></pre></div>
<pre><code>##   little_ones
## 1           0
## 2           1
## 3           2
## 4           3
## 5           4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>## [1] 0 1 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[[<span class="dv">1</span>]][<span class="dv">1</span>] <span class="co"># as above</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Or using <code>names</code> with the <code>$</code> operator (see <code>?Extract</code> for more information).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(df)</code></pre></div>
<pre><code>## [1] &quot;little_ones&quot; &quot;big_ones&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(df)</code></pre></div>
<pre><code>## [1] &quot;little_ones&quot; &quot;big_ones&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(df)</code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$little_ones </code></pre></div>
<pre><code>## [1] 0 1 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$big_ones</code></pre></div>
<pre><code>## [1] 5 6 7 8 9</code></pre>
<p>Data frames also inherit the methods of lists and vectors</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">medium_ones =</span> <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>))
<span class="kw">cbind</span>(df, df2)</code></pre></div>
<pre><code>##   little_ones big_ones medium_ones
## 1           0        5           3
## 2           1        6           4
## 3           2        7           5
## 4           3        8           6
## 5           4        9           7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_squared &lt;-<span class="st"> </span><span class="kw">cbind</span>(df2, df2)
<span class="kw">names</span>(df_squared) &lt;-<span class="st"> </span><span class="kw">names</span>(df)
<span class="kw">rbind</span>(df,df_squared)</code></pre></div>
<pre><code>##    little_ones big_ones
## 1            0        5
## 2            1        6
## 3            2        7
## 4            3        8
## 5            4        9
## 6            3        3
## 7            4        4
## 8            5        5
## 9            6        6
## 10           7        7</code></pre>
</div>
<div id="etc." class="section level3">
<h3><span class="header-section-number">4.3.4</span> Etc.</h3>
<p>Functions, environments, and other stuff that we’ll learn about in our section on Functions are also base objects, but we’ll discuss them then.</p>
</div>
</div>
<div id="s3-objects" class="section level2">
<h2><span class="header-section-number">4.4</span> S3 Objects</h2>
<p>S3 objects “belong to” functions, which become their methods. S3 classes don’t really “exist,” but are assigned as an object’s “class” attribute. S3 classes are one of the worst things about R, but are also responsible for some of its flexibility.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="kw">attr</span>(x, <span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x) &lt;-<span class="st"> &quot;letters&quot;</span>
<span class="kw">attr</span>(x, <span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;letters&quot;</code></pre>
<p>One can find an articulation of the reasoning behind this “function-and-class” programming can be found here: <a href="https://developer.r-project.org/howMethodsWork.pdf" class="uri">https://developer.r-project.org/howMethodsWork.pdf</a>. We’ll talk more about this in later sections.</p>
<p>S3 objects are defined by a series of functions that themselves contain the <code>UseMethod()</code> function - this is described briefly above, try <code>?UseMethod</code> for more detail. These functions extend the generic function, typically using the syntax <code>generic.class()</code> as in the case of <code>mean.Date()</code> for taking the mean of dates. One can list the objects that have a generic method, and the methods that an object has with <code>methods()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(mean) <span class="co"># list the classes that have this method</span></code></pre></div>
<pre><code>## [1] mean.Date     mean.default  mean.difftime mean.POSIXct  mean.POSIXlt 
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(<span class="dt">class=</span><span class="st">&quot;Date&quot;</span>) <span class="co"># list the methods that this class has</span></code></pre></div>
<pre><code>##  [1] -             [             [[            [&lt;-           +            
##  [6] as.character  as.data.frame as.list       as.POSIXct    as.POSIXlt   
## [11] Axis          c             cut           diff          format       
## [16] hist          is.numeric    julian        Math          mean         
## [21] months        Ops           pretty        print         quarters     
## [26] rep           round         seq           split         str          
## [31] summary       Summary       trunc         weekdays      weighted.mean
## [36] xtfrm        
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<p>By default, the source code of S3 methods is not visible to R, one can retreive it with `utils::getS3method``</p>
<p>The <code>plot</code> base function is an s3 generic method.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">ftype</span>(plot) <span class="co"># get a function&#39;s type</span></code></pre></div>
<pre><code>## [1] &quot;s3&quot;      &quot;generic&quot;</code></pre>
<p>By default, if the first argument is a base type compatible with being points on a scatterplot, the actual function that is called is <code>plot.default</code>, whose source behaves like you’d expect:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">plot.default</code></pre></div>
<pre><code>## function (x, y = NULL, type = &quot;p&quot;, xlim = NULL, ylim = NULL, 
##     log = &quot;&quot;, main = NULL, sub = NULL, xlab = NULL, ylab = NULL, 
##     ann = par(&quot;ann&quot;), axes = TRUE, frame.plot = axes, panel.first = NULL, 
##     panel.last = NULL, asp = NA, ...) 
## {
##     localAxis &lt;- function(..., col, bg, pch, cex, lty, lwd) Axis(...)
##     localBox &lt;- function(..., col, bg, pch, cex, lty, lwd) box(...)
##     localWindow &lt;- function(..., col, bg, pch, cex, lty, lwd) plot.window(...)
##     localTitle &lt;- function(..., col, bg, pch, cex, lty, lwd) title(...)
##     xlabel &lt;- if (!missing(x)) 
##         deparse(substitute(x))
##     ylabel &lt;- if (!missing(y)) 
##         deparse(substitute(y))
##     xy &lt;- xy.coords(x, y, xlabel, ylabel, log)
##     xlab &lt;- if (is.null(xlab)) 
##         xy$xlab
##     else xlab
##     ylab &lt;- if (is.null(ylab)) 
##         xy$ylab
##     else ylab
##     xlim &lt;- if (is.null(xlim)) 
##         range(xy$x[is.finite(xy$x)])
##     else xlim
##     ylim &lt;- if (is.null(ylim)) 
##         range(xy$y[is.finite(xy$y)])
##     else ylim
##     dev.hold()
##     on.exit(dev.flush())
##     plot.new()
##     localWindow(xlim, ylim, log, asp, ...)
##     panel.first
##     plot.xy(xy, type, ...)
##     panel.last
##     if (axes) {
##         localAxis(if (is.null(y)) 
##             xy$x
##         else x, side = 1, ...)
##         localAxis(if (is.null(y)) 
##             x
##         else y, side = 2, ...)
##     }
##     if (frame.plot) 
##         localBox(...)
##     if (ann) 
##         localTitle(main = main, sub = sub, xlab = xlab, ylab = ylab, 
##             ...)
##     invisible()
## }
## &lt;bytecode: 0x7f9bcdac58e8&gt;
## &lt;environment: namespace:graphics&gt;</code></pre>
<p>If the first argument to <code>plot</code> has its own <code>plot</code> method (ie. that it is exported by the object’s package namespace, more about this in section 5), that function is called instead. That’s why</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aq &lt;-<span class="st"> </span>datasets::airquality
<span class="kw">plot</span>(<span class="kw">lm</span>(Ozone ~<span class="st"> </span>Month, <span class="dt">data=</span>aq))</code></pre></div>
<p><img src="02-Objects_files/figure-html/unnamed-chunk-30-1.png" width="672" /><img src="02-Objects_files/figure-html/unnamed-chunk-30-2.png" width="672" /><img src="02-Objects_files/figure-html/unnamed-chunk-30-3.png" width="672" /><img src="02-Objects_files/figure-html/unnamed-chunk-30-4.png" width="672" /></p>
<p>is different than this nonsensical model</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(lme4::<span class="kw">lmer</span>(Ozone ~<span class="st"> </span><span class="dv">0</span> +<span class="st"> </span>(Day |<span class="st"> </span>Month), <span class="dt">data=</span>aq))</code></pre></div>
<p><img src="02-Objects_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div id="example-extending-s3-objects" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Example: Extending S3 Objects</h3>
<blockquote>
<p><a href="http://adv-r.had.co.nz/OO-essentials.html" class="uri">http://adv-r.had.co.nz/OO-essentials.html</a> “Creating new methods and generics”</p>
</blockquote>
<p>Using a class’s method is what allows us to do sensible computations on different types of objects with the same command.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">ftype</span>(mean) <span class="co"># mean is an s3 generic function</span></code></pre></div>
<pre><code>## [1] &quot;s3&quot;      &quot;generic&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="kw">class</span>(x) &lt;-<span class="st"> &quot;just_one&quot;</span>

<span class="co"># We give our &quot;just_one&quot; class a mean method:</span>
mean.just_one &lt;-<span class="st"> </span>function(x, ...) <span class="kw">print</span>(<span class="st">&quot;that&#39;s just a one you maniac&quot;</span>)

<span class="co"># Mean behaves like it should for numbers and lists of numbers</span>
<span class="kw">mean</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="fl">1.5</span>))</code></pre></div>
<pre><code>## [1] 1.25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(x) <span class="co"># Even though &quot;x&quot; is just 1, because we have given it a &quot;class&quot; attribute it calls mean.just_one rather than mean.default</span></code></pre></div>
<pre><code>## [1] &quot;that&#39;s just a one you maniac&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Other objects have their own mean() method</span>
<span class="kw">methods</span>(mean)</code></pre></div>
<pre><code>##  [1] mean,ANY-method          mean,Matrix-method      
##  [3] mean,sparseMatrix-method mean,sparseVector-method
##  [5] mean.Date                mean.default            
##  [7] mean.difftime            mean.just_one           
##  [9] mean.POSIXct             mean.POSIXlt            
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># like Date objects</span>
dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;01jan2000&quot;</span>,<span class="st">&quot;15jan2000&quot;</span>)
<span class="kw">attr</span>(dates,<span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(dates) <span class="co"># Don&#39;t work</span></code></pre></div>
<pre><code>## Warning in mean.default(dates): argument is not numeric or logical:
## returning NA</code></pre>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># turn it into &quot;Date&quot; object</span>
dates &lt;-<span class="st"> </span><span class="kw">as.Date</span>(dates, <span class="st">&quot;%d%b%Y&quot;</span>) <span class="co"># base has a set of &quot;as&quot; methods to convert types</span>
<span class="kw">attr</span>(dates,<span class="st">&quot;class&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(dates) <span class="co"># will call its method</span></code></pre></div>
<pre><code>## [1] &quot;2000-01-08&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean.Date</span>(dates) <span class="co"># which can also be called directly</span></code></pre></div>
<pre><code>## [1] &quot;2000-01-08&quot;</code></pre>
</div>
</div>
<div id="s4-objects" class="section level2">
<h2><span class="header-section-number">4.5</span> S4 Objects</h2>
<p>S4 objects have a single class definition with specifically defined fields and functions. They are too complicated for us to cover in much detail yet, so we will return to them again later.</p>
<p>We could pretend for awhile we’re another class with S3 objects</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a=</span><span class="st">&quot;test&quot;</span>)
<span class="kw">class</span>(a)</code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(a) &lt;-<span class="st"> &quot;lm&quot;</span>
a</code></pre></div>
<pre><code>## 
## Call:
## NULL
## 
## No coefficients</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(a)</code></pre></div>
<pre><code>## Error in if (p == 0) {: argument is of length zero</code></pre>
<p>Not so with S4 objects.</p>
<p>We can finally implement our truck classes</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setClass</span>(<span class="st">&quot;truck&quot;</span>,
  <span class="dt">slots =</span> <span class="kw">list</span>(<span class="dt">engine_size =</span> <span class="st">&quot;numeric&quot;</span>,
    <span class="dt">n_wheels =</span> <span class="st">&quot;numeric&quot;</span>,
    <span class="dt">n_jumps  =</span> <span class="st">&quot;numeric&quot;</span>))
  
<span class="kw">setClass</span>(<span class="st">&quot;monster_truck&quot;</span>,
  <span class="dt">slots =</span> <span class="kw">list</span>(<span class="dt">mythical_backstory =</span> <span class="st">&quot;character&quot;</span>),
  <span class="dt">contains =</span> <span class="st">&quot;truck&quot;</span>)
  
<span class="kw">getClass</span>(<span class="st">&quot;monster_truck&quot;</span>)</code></pre></div>
<p>S4 objects have <code>slots</code>, accessible with <code>@</code> (which behaves like <code>$</code>) or <code>slot()</code>. We create new instances of S4 objects with <code>new()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_truck &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;truck&quot;</span>, <span class="dt">engine_size =</span> <span class="dv">4</span>, <span class="dt">n_wheels =</span> <span class="dv">4</span>, <span class="dt">n_jumps =</span> <span class="dv">40</span>)

my_truck@engine_size
<span class="kw">slot</span>(my_truck, <span class="st">&quot;n_jumps&quot;</span>)</code></pre></div>
<p>S4 Methods are a headache (and we will skip them in the class). One has to create a generic function if it does not yet exist with <code>setGeneric()</code>, then set the method, classes and function separately with <code>setMethod()</code>. An example for your edification:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setGeneric</span>(<span class="st">&quot;go_faster&quot;</span>, function(which_truck, how_fast) {<span class="kw">standardGeneric</span>(<span class="st">&quot;go_faster&quot;</span>)})

<span class="kw">setMethod</span>(<span class="st">&quot;go_faster&quot;</span>,
  <span class="dt">signature =</span> <span class="kw">c</span>(<span class="dt">which_truck =</span> <span class="st">&quot;truck&quot;</span>,
    <span class="dt">how_fast =</span> <span class="st">&quot;character&quot;</span>),
  function(which_truck, how_fast){
    <span class="kw">print</span>(<span class="st">&quot;your truck is now going:&quot;</span>)
    <span class="kw">print</span>(how_fast)
    <span class="kw">print</span>(<span class="st">&quot;in MPH:&quot;</span>)
    <span class="kw">print</span>(which_truck@engine_size *<span class="st"> </span><span class="dv">4</span>)
  }
)

<span class="kw">go_faster</span>(my_truck, <span class="st">&quot;2 fast 4 u 2 c&quot;</span>)</code></pre></div>
<p>Try extending that to have the monster trucks tell their mythical_backstory as they accelerate.</p>
<p>We will return to S4 objects in more detail in section 5.</p>
</div>
<div id="reference-classes" class="section level2">
<h2><span class="header-section-number">4.6</span> Reference Classes</h2>
<p>References classes are a “truly” object oriented system in R, but we are going to skip them entirely for now because they are rare enough that you aren’t likely to encounter them yet. See here for more information: <a href="http://adv-r.had.co.nz/OO-essentials.html#rc" class="uri">http://adv-r.had.co.nz/OO-essentials.html#rc</a></p>
</div>
<div id="references" class="section level2">
<h2><span class="header-section-number">4.7</span> References</h2>
<ul>
<li><a href="http://manuals.bioinformatics.ucr.edu/home/programming-in-r#TOC-Object-Oriented-Programming-OOP-" class="uri">http://manuals.bioinformatics.ucr.edu/home/programming-in-r#TOC-Object-Oriented-Programming-OOP-</a></li>
<li><a href="http://www.stat.ucla.edu/%7Ecocteau/stat202a/resources/docs/S4Objects.pdf">http://www.stat.ucla.edu/%7Ecocteau/stat202a/resources/docs/S4Objects.pdf</a></li>
<li><a href="http://adv-r.had.co.nz/OO-essentials.html" class="uri">http://adv-r.had.co.nz/OO-essentials.html</a></li>
<li><a href="http://adv-r.had.co.nz/Data-structures.html" class="uri">http://adv-r.had.co.nz/Data-structures.html</a></li>
</ul>
<hr />

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="what-is-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
